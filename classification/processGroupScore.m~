%% process group score
% compute averages and error bars classification accuracies over time
% written for data generated by "runGroup.m"
clear; clc

listing = dir('groupScores/*.mat');
numFiles = size(listing,1);

for i = 1:numFiles
    fileName = listing(i).name;
    load(['groupScores/' fileName])
    data.acc(:,i) = mean(group.accuracy;
    data.dev(:,i) = group.deviation;
    data.rep(:,i) = group.response;
end



%% set up the figure
% constant
d.FONTSIZE = 18;
d.LW = 2;


%% Visualize the classification accuracy over time
% Plot the CV accuracies against time
subplot(1,2,1)
plot(mean(group.accuracy,2),'linewidth',d.LW)

xlabel('time', 'FontSize', d.FONTSIZE)
ylabel('performance (%)', 'FontSize', d.FONTSIZE)
title('Logistic regression accuracy against time', 'FontSize', d.FONTSIZE)

% Plot the sum of absolute deviations (on the test set) against time
subplot(1,2,2)
plot(1 - mean(group.deviation,2),'linewidth',d.LW)

xlabel('time', 'FontSize', d.FONTSIZE)
ylabel('$1 - \sum | \mathrm{deviation \hspace{2mm} from \hspace{2mm} targets}|  \hspace{.5cm} (target \in \{0,1\})$', 'FontSize', d.FONTSIZE,'Interpreter','latex')
title(' ''Fit ''against time', 'FontSize', d.FONTSIZE)



