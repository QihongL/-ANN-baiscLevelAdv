%% process group score
% compute averages and error bars classification accuracies over time
% written for data generated by "runGroup.m"
clear; clc; 
mainDirName = 'groupScores_class';

%% load file and compute summarized data
condition = 'randomSubset';
condition = 'spatBlurring';
method = 'svm'; 
%
simNum = 27;
presentation = 'rapid';
% simName = 'decay';
simName = 'varyNoise';
ep = 20;
simNum_sub = 1;
rep_idx = 2; 

% gather data 
data_sub = cell(length(simNum_sub),1);
for i = 1 : length(rep_idx)
    % get path name
    subDirName = sprintf('sim%d.%d_%s_%s_e%d_%.2d', ...
        simNum,simNum_sub,simName,presentation,ep, rep_idx(i));
    pathName = fullfile(mainDirName,subDirName,method);
    listing = dir([pathName '/gsClass_' condition '*.mat']);
    % summarize the data
    [data_sub{i}, propUsed] = summarizeData(listing, pathName, condition);    
end

%% Visualize the classification accuracy over time
data = computeAvg_acrossSims(data_sub); 
plotPerformance_MVPA(data, propUsed, condition)
